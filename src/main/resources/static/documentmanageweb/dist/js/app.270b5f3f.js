(function(e){function t(t){for(var o,r,a=t[0],l=t[1],c=t[2],d=0,p=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],o=!0,a=1;a<i.length;a++){var l=i[a];0!==n[l]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},n={app:0},s=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"030e":function(e,t,i){"use strict";i("d394")},1:function(e,t){},"12ea":function(e,t,i){},"12eb":function(e,t,i){e.exports=i.p+"img/bottom.736525f7.svg"},"194e":function(e,t,i){"use strict";i("6581")},2:function(e,t){},"206d":function(e,t,i){"use strict";i("4413")},"21bb":function(e,t,i){"use strict";i("2dad")},"21da":function(e,t,i){"use strict";i("effc")},"2dad":function(e,t,i){},3:function(e,t){},3482:function(e,t,i){},4:function(e,t){},4413:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("b0c0");var o=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div"),i("router-view")],1)},s=[],r={name:"App",data:function(){return{}},methods:{}},a=r,l=(i("5c0b"),i("2877")),c=Object(l["a"])(a,n,s,!1,null,null,null),u=c.exports,d=i("8c4f"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-main",[i("el-dialog",{staticClass:"send",attrs:{title:"发送文件",visible:e.sendVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.sendVisible=t}}},[i("div",[i("span",[e._v("用户")]),i("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:e.selectedSend,callback:function(t){e.selectedSend=t},expression:"selectedSend"}},e._l(e.sendOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",{staticClass:"send-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.sendVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toSend(),e.sendVisible=!1}}},[e._v("发送")])],1)]),i("el-dialog",{staticClass:"check",attrs:{title:"审核联系人",visible:e.checkVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.checkVisible=t}}},[i("div",[i("span",[e._v("用户")]),i("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择"},model:{value:e.selectedCheck,callback:function(t){e.selectedCheck=t},expression:"selectedCheck"}},e._l(e.checkOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",{staticClass:"check-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.checkVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toCheck(),e.checkVisible=!1}}},[e._v("发送")])],1)]),i("el-dialog",{staticClass:"delete",attrs:{title:"提示",visible:e.deleteVisible,width:"30%",height:"50%"},on:{"update:visible":function(t){e.deleteVisible=t}}},[i("span",[e._v("确认删除？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deleteVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteVisible=!1,e.toDelete()}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"版本记录",visible:e.recordVisible,center:"",width:"60%"},on:{"update:visible":function(t){e.recordVisible=t}}},[i("el-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{data:e.recordData,"tooltip-effect":"dark","header-cell-style":e.headStyle,"cell-style":e.rowStyle,"default-sort":{prop:"time",order:"descending"}},on:{"selection-change":e.recordSelectionChange,"row-click":e.recordRowClick}},[i("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),i("el-table-column",{attrs:{type:"index",index:e.reIndexMethod,label:"版本号",width:"80"}}),i("el-table-column",{attrs:{prop:"docName",label:"文件名称","min-width":"20%","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"editor",label:"修改人","min-width":"10%"}}),i("el-table-column",{attrs:{prop:"time",label:"修改时间","min-width":"15%"}}),i("el-table-column",{attrs:{prop:"operation",label:"操作","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-view",circle:""},on:{click:function(i){return e.toLook(t.row)}}})],1)],1)]}}])})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{disabled:0===e.recordSelection.length},on:{click:function(t){return e.toggleRecord()}}},[e._v("取消选择")]),i("el-button",{attrs:{type:"danger",disabled:0===e.recordSelection.length},on:{click:function(t){return e.deleteRecord()}}},[e._v("删 除")])],1)],1),i("div",{staticClass:"above",staticStyle:{display:"flex","line-height":"40px","margin-bottom":"20px"}},[i("div",{staticClass:"count",staticStyle:{"font-size":"18px"}},[e._v(" 当前已选择"),i("strong",[e._v(e._s(this.multipleSelection.length))]),e._v("条 ")]),i("div",{staticStyle:{position:"absolute",right:"45px"}},[i("el-button",{attrs:{type:"primary",disabled:0===this.multipleSelection.length},on:{click:function(t){return e.toDownload()}}},[e._v("下载")]),i("el-button",{attrs:{type:"danger",disabled:0===this.multipleSelection.length},on:{click:function(t){e.deleteVisible=!0}}},[e._v("删除")])],1)]),i("el-table",{ref:"infoTable",staticClass:"infoTable",staticStyle:{"overflow-y":"auto"},style:{"max-height":this.timeLineHeight+"px"},attrs:{data:e.showInfo,"tooltip-effect":"dark","header-cell-style":e.headStyle,"cell-style":e.rowStyle},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick,"row-contextmenu":e.tableRight}},[i("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),i("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod,width:"60px"}}),i("el-table-column",{attrs:{prop:"docname",label:"文件名称","min-width":"15%","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"uploader",label:"上传人员","min-width":"8%","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"uploadtime",label:"上传时间","min-width":"15%"}}),i("el-table-column",{attrs:{prop:"sender",label:"发送人员","min-width":"8%","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"status",label:"当前状态","min-width":"8%"}}),i("el-table-column",{attrs:{prop:"type",label:"文件类型","min-width":"8%"}}),i("el-table-column",{attrs:{prop:"operation",label:"操作","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"预览",placement:"top"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAction("预览",t.row.action),expression:"isShowAction('预览', scope.row.action)"}],attrs:{icon:"el-icon-view",circle:""},on:{click:function(i){return e.toPreview(t.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAction("编辑",t.row.action),expression:"isShowAction('编辑', scope.row.action)"}],attrs:{icon:"el-icon-edit",circle:""},on:{click:function(i){return e.toEdit(t.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发送",placement:"top"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAction("发送",t.row.action),expression:"isShowAction('发送', scope.row.action)"}],attrs:{icon:"el-icon-s-promotion",circle:""},on:{click:function(i){e.sendVisible=!0,e.showSend(t.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核",placement:"top"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAction("审核",t.row.action),expression:"isShowAction('审核', scope.row.action)"}],attrs:{icon:"el-icon-s-check",circle:""},on:{click:function(i){e.checkVisible=!0,e.showCheck(t.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"共享",placement:"top"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAction("共享",t.row.action),expression:"isShowAction('共享', scope.row.action)"}],attrs:{icon:"el-icon-connection",circle:""},on:{click:function(i){return e.toShare(t.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发布",placement:"top"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAction("发布",t.row.action),expression:"isShowAction('发布', scope.row.action)"}],attrs:{icon:"el-icon-unlock",circle:""},on:{click:function(i){return e.toPublish(t.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"版本记录",placement:"top"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowAction("版本记录",t.row.action),expression:"isShowAction('版本记录', scope.row.action)"}],attrs:{icon:"el-icon-tickets",circle:""},on:{click:function(i){e.recordVisible=!0,e.showRecord(t.row)}}})],1)],1)]}}])})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.tableMenuVisible,expression:"tableMenuVisible"}],attrs:{id:"tableMenu"},on:{mouseleave:function(t){e.tableMenuVisible=!e.tableMenuVisible}}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"text item"},[e.isCollected?i("el-link",{attrs:{icon:"el-icon-star-on",underline:!1,disabled:e.isCollected}},[e._v("已收藏")]):i("el-link",{attrs:{icon:"el-icon-star-off",underline:!1},on:{click:function(t){return e.toCollect()}}},[e._v("收藏")])],1),i("div",{staticClass:"text item"},[i("el-icon",{staticClass:"el-icon-data-analysis"}),i("el-link",{attrs:{underline:!1},on:{click:function(t){return e.getTransInfo()}}},[e._v("文件流转")])],1)])],1),i("el-dialog",{attrs:{title:"文件流转",visible:e.circleVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.circleVisible=t}}},[i("Timeline",{attrs:{mapper:e.mapper,activities:e.activities}})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:e.dataCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},h=[],m=i("5530"),f=(i("d81d"),i("159b"),i("d3b7"),i("2f62"));o["default"].use(f["a"]);var g=new f["a"].Store({state:{Authorization:"",currentuser:{},infoSelection:[],options:[],refreshCount:0,currentId:"",currentPage:0,pageSize:0,showInfo:[],dataCount:0,isSearch:!1,isRetrieve:!1},mutations:{setAuthorization:function(e,t){e.Authorization=t},setCurrentuser:function(e,t){e.currentuser=t},setInfoSelection:function(e,t){e.infoSelection=t},setOptions:function(e,t){e.options=t},setFilter:function(e,t){e.filter_tableInfo=t},refresh:function(e){e.refreshCount++},setCurrentId:function(e,t){e.currentId=t},setCurrentPage:function(e,t){e.currentPage=t},setPageSize:function(e,t){e.pageSize=t},setShowInfo:function(e,t){e.showInfo=t},setDataCount:function(e,t){e.dataCount=t},setIsSearch:function(e,t){e.isSearch=t},setIsRetrieve:function(e,t){e.isRetrieve=t}},actions:{},getters:{},modules:{}}),v=function(){return g.state.Authorization},b={"Content-Type":"application/json"},w=function(e){return fetch(e,{headers:Object(m["a"])(Object(m["a"])({},b),{},{Authorization:v()})}).then((function(e){return e.json()}))},y=function(e,t){return fetch(e,{method:"POST",headers:Object(m["a"])(Object(m["a"])({},b),{},{Authorization:v()}),body:JSON.stringify(t)}).then((function(e){return e.json()}))},k=function(e,t){return fetch(e,{method:"POST",body:t,headers:{Authorization:v()}}).then((function(e){return e.json()}))},S=function(e,t){return fetch(e,{method:"DELETE",headers:Object(m["a"])(Object(m["a"])({},b),{},{Authorization:v()}),body:JSON.stringify(t)}).then((function(e){return e.json()}))},x={get:w,post:y,postformdata:k,delete:S},C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"time-line"}},[i("el-timeline",e._l(e.activities,(function(t,o){return i("el-timeline-item",{key:o,attrs:{icon:t.icon,type:t.type||"primary",color:t.color||"#409EFF",size:t.size||"large",timestamp:t.timestamp}},["object"===typeof t.content?i("div",e._l(t.content,(function(t,o){return i("div",{key:o,domProps:{innerHTML:e._s(t)}})})),0):i("div",[i("div",{domProps:{innerHTML:e._s(t.content)}})])])})),1)],1)},_=[],O={name:"Timeline",props:{mapper:Object,activities:Array}},F=O,$=(i("194e"),Object(l["a"])(F,C,_,!1,null,null,null)),I=$.exports,j={name:"Content",components:{Timeline:I},data:function(){return{tableMenuVisible:!1,tableInfo:[{index:"1",docname:"777777.docx",uploader:"hxy",uploadtime:"2022-11-1 13:00",sender:"hxy",status:"已读",type:"docx"}],multipleSelection:[],isCollected:!1,circleVisible:!1,mapper:{user:"用户",describe:"描述",state:"状态"},activities:[],deleteVisible:!1,recordVisible:!1,recordData:[{docName:"文件",editor:"张三",time:"2022-07-26 17:00",index:"1"}],recordId:"",recordSelection:[],selectedRow:{id:"",isCollected:!1},sendVisible:!1,sendOptions:[],selectedSend:[],checkVisible:!1,checkOptions:[],selectedCheck:[],shareSelection:[],timeLineHeight:""}},computed:Object(m["a"])({},Object(f["b"])({currentId:"currentId",currentPage:"currentPage",pageSize:"pageSize",showInfo:"showInfo",dataCount:"dataCount"})),mounted:function(){var e=this;this.timeLineHeight=document.documentElement.clientHeight-210,window.onresize=function(){e.timeLineHeight=document.documentElement.clientHeight-210}},methods:{indexMethod:function(e){return(this.currentPage-1)*this.pageSize+e+1},tableRight:function(e,t,i){this.selectedRow.id=e.id,this.tableMenuVisible=!0,i.preventDefault();var o=document.querySelector("#tableMenu");o.style.cssText="position: fixed; left: "+(i.clientX-10)+"px; top: "+(i.clientY-25)+"px; z-index: 999; cursor:pointer;"},toCollect:function(){var e=this;x.get("http://192.168.8.108:8080/upload/collect/"+this.selectedRow.id).then((function(t){console.log(t.data),e.$message({type:200===t.code?"success":"error",message:t.msg})}))},getTransInfo:function(){var e=this;this.activities=[{content:"暂无流转信息",timestamp:"2022年9月16日 14:21"}],x.get("http://192.168.8.108:8080/transfer/show/"+this.selectedRow.id).then((function(t){200===t.code&&(t.data.length>0&&(e.activities=t.data.map((function(e){return{content:{user:e.operator,description:e.action},timestamp:e.time}}))),e.circleVisible=!0)}))},isShowAction:function(e,t){var i=!1;return t.forEach((function(t){e===t&&(i=!0)})),i},toDownload:function(){var e="";this.multipleSelection.forEach((function(t){e=e+t.id+","})),e=e.substring(0,e.lastIndexOf(",")),window.open("http://192.168.8.108:8080/upload/download/"+e)},toDelete:function(){var e=this,t="";this.multipleSelection.forEach((function(e){t=t+e.id+","})),t=t.substring(0,t.lastIndexOf(",")),x.get("http://192.168.8.108:8080/upload/delete/"+t).then((function(t){e.$message({type:200===t.code?"success":"error",message:t.msg}),200===t.code&&e.$store.commit("refresh")}))},showSend:function(e){var t=this;this.selectedRow.id=e.id,x.get("http://192.168.8.108:8080/user/search").then((function(e){console.log(e.data),200===e.code&&(t.sendOptions=e.data.map((function(e){return{value:e.id,label:e.username}})))}))},toSend:function(){var e=this;this.selectedSend||this.$message({message:"请选择用户",type:"error"});var t="";this.selectedSend.forEach((function(e){t=t+e+","})),t=t.substring(0,t.lastIndexOf(",")),console.log("str:"+t),console.log("选择的文件id"+this.selectedRow.id);var i={docIds:this.selectedRow.id,userIds:t};x.post("http://192.168.8.108:8080/upload/send",i).then((function(t){e.$message({type:200===t.code?"success":"error",message:t.msg})}))},showCheck:function(e){var t=this;this.selectedRow.id=e.id,x.get("http://192.168.8.108:8080/user/admin").then((function(e){console.log(e.data),200===e.code&&(t.checkOptions=e.data.map((function(e){return{value:e.id,label:e.username}})),console.log(t.checkOptions))}))},toCheck:function(){var e=this;this.selectedCheck||this.$message({message:"请选择用户",type:"error"});var t="";this.selectedCheck.forEach((function(e){t=t+e+","})),t=t.substring(0,t.lastIndexOf(",")),console.log("str:"+t),console.log("选择的文件id"+this.selectedRow.id);var i={docIds:this.selectedRow.id,userIds:t};x.post("http://192.168.8.108:8080/upload/review",i).then((function(t){console.log(t.data),e.$message({type:200===t.code?"success":"error",message:t.msg})}))},handleSelectionChange:function(e){this.multipleSelection=e,this.$store.commit("setInfoSelection",this.multipleSelection)},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.infoTable.toggleRowSelection(e)})):this.$refs.infoTable.clearSelection()},handleRowClick:function(e,t,i){this.$refs.infoTable.toggleRowSelection(e)},handleSizeChange:function(e){this.$store.commit("setPageSize",e)},handleCurrentChange:function(e){this.$store.commit("setCurrentPage",e)},headStyle:function(){return"text-align:center"},rowStyle:function(){return"text-align:center"},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},toShare:function(e){var t=this;x.post("http://192.168.8.108:8080/upload/share",{id:e.id}).then((function(e){t.$message({type:200===e.code?"success":"error",message:e.msg}),200===e.code&&t.$store.commit("refresh")}))},toPublish:function(e){var t=this;x.post("http://192.168.8.108:8080/upload/release",{id:e.id}).then((function(e){t.$message({type:200===e.code?"success":"error",message:e.msg}),200===e.code&&t.$store.commit("refresh")}))},toEdit:function(e){var t=this.$router.resolve({name:"OnlyOffice",query:{id:e.id}});window.open(t.href,"_blank")},toPreview:function(e){var t=this,o=i("e762").Base64;x.get("http://192.168.8.108:8080/docs/preview/"+e.id).then((function(e){var i="http://192.168.8.108:8080/"+e.data[0];200===e.code&&(window.open("http://192.168.8.108:8012/onlinePreview?url="+encodeURIComponent(o.encode(i))),t.$store.commit("refresh"))}))},recordSelectionChange:function(e){this.recordSelection=e},recordRowClick:function(e,t,i){this.$refs.recordTable.toggleRowSelection(e)},toggleRecord:function(e){var t=this;e?e.forEach((function(e){t.$refs.recordTable.toggleRowSelection(e)})):this.$refs.recordTable.clearSelection()},reIndexMethod:function(e){return this.recordData.length-e},showRecord:function(e){var t=this;x.get("http://192.168.8.108:8080/version/"+e.id).then((function(e){console.log(e.data),200===e.code&&(t.recordData=e.data)}))},deleteRecord:function(){var e=this,t="";this.recordSelection.forEach((function(e){t=t+e.id+","})),t=t.substring(0,t.lastIndexOf(",")),console.log(t),x.get("http://192.168.8.108:8080/version/delete/"+t).then((function(t){console.log(t.data),e.$message({type:200===t.code?"success":"error",message:t.msg}),200===t.code&&(e.recordData=t.data)}))},toLook:function(e){var t=this;console.log(e.id),x.get("http://192.168.8.108:8080/docs/previewVer/"+e.id).then((function(e){console.log(e.data);var i="http://192.168.8.108:8080/"+e.data;200===e.code&&(window.open("http://192.168.8.108:8012/onlinePreview?url="+encodeURIComponent(i)),t.$store.commit("refresh"))}))}}},z=j,V=(i("58ff"),Object(l["a"])(z,p,h,!1,null,"66819971",null)),T=V.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["text"==e.fileType?[i("div")]:"pdf"==e.fileType?[i("iframe",{attrs:{src:e.src,frameborder:"0"}})]:"image"==e.fileType?[i("img",{attrs:{src:e.src,alt:""}})]:e._e()],2)},R=[],P=(i("1276"),i("ac1f"),{text:["txt"],pdf:["pdf"],image:["png","jpg","bmp"]}),L={name:"Preview",computed:{extra:function(){return this.src.split(".").pop()},fileType:function(){for(var e in P)if(P[e].indexOf(this.extra)>-1)return e;return"others"}},data:function(){return{src:"",text:""}},beforeMount:function(){var e=this;this.src=this.$route.query.src,"text"===this.fileType&&fetch(this.src).then((function(e){return e.text()})).then((function(t){e.text=t}))},methods:{showPreview:function(){fetch.get(this.src).then((function(e){console.log(e),e.text()})).then()}}},D=L,A=Object(l["a"])(D,E,R,!1,null,null,null),M=A.exports,N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-wrap",style:{width:e.fullWidth+"px",height:e.fullHeight+"px"}},[i("el-container",{staticClass:"wjLogin",style:{width:e.fullWidth+"px"},attrs:{direction:"vertical"}},[i("div",{staticClass:"loginTitle"},[i("h3",[e._v("文件整编系统")])]),i("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"用户名",prop:"username"}},[i("el-input",{model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{"show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitLogin("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1),i("div",{staticClass:"login-btn"},[i("el-button",{on:{click:function(t){return e.toSignup()}}},[e._v("注册")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitLogin("loginForm")}}},[e._v("登录")])],1)],1)],1)},U=[];i("498a");function H(e,t,i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var n="expires="+o.toGMTString();document.cookie=e+"="+t+"; "+n}function W(e){for(var t=e+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){var n=i[o].trim();if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}var q,J={setCookie:H,getCookie:W},B={name:"Login",data:function(){return{fullWidth:document.documentElement.clientWidth,fullHeight:document.documentElement.clientHeight,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){window.addEventListener("resize",this.handleResize)},beforeUnmount:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.fullWidth=document.documentElement.clientWidth,this.fullHeight=document.documentElement.clientHeight},toSignup:function(){this.$router.push("/signup"),this.loginForm={username:"",password:""}},submitLogin:function(e){var t=this;this.$refs[e].validate((function(e){e&&x.post("http://192.168.8.108:8080/user/login",t.loginForm).then((function(e){200===e.code?(t.$message({message:"登录成功!",type:"success"}),t.$store.commit("setAuthorization",e.data.token),t.$store.commit("setCurrentuser",{id:e.data.id,username:e.data.username}),J.setCookie("Authorization",e.data.token,1),J.setCookie("userinfo",JSON.stringify({id:e.data.id,username:e.data.username}),1),t.$router.push("/home")):t.$message({message:"账号不存在或密码错误!",type:"error"})}))}))}}},Z=B,G=(i("206d"),Object(l["a"])(Z,N,U,!1,null,null,null)),X=G.exports,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"signup-wrap",style:{width:e.fullWidth+"px",height:e.fullHeight+"px"}},[i("el-container",{staticClass:"wjSignup",style:{width:e.fullWidth+"px"},attrs:{direction:"vertical"}},[i("div",{staticClass:"signupTitle"},[i("h3",[e._v("注册账号")])]),i("el-form",{ref:"signupForm",staticClass:"signupForm",attrs:{model:e.signupForm,rules:e.signupRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"用户名",prop:"username"}},[i("el-input",{model:{value:e.signupForm.username,callback:function(t){e.$set(e.signupForm,"username",t)},expression:"signupForm.username"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{"show-password":""},model:{value:e.signupForm.password,callback:function(t){e.$set(e.signupForm,"password",t)},expression:"signupForm.password"}})],1),i("el-form-item",{attrs:{label:"确认密码",prop:"re_pwd"}},[i("el-input",{attrs:{"show-password":""},model:{value:e.signupForm.re_pwd,callback:function(t){e.$set(e.signupForm,"re_pwd",t)},expression:"signupForm.re_pwd"}})],1),i("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[i("el-input",{model:{value:e.signupForm.email,callback:function(t){e.$set(e.signupForm,"email",t)},expression:"signupForm.email"}})],1)],1),i("div",{staticClass:"signup-btn"},[i("el-button",{on:{click:function(t){return e.toLogin()}}},[e._v("返回")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitSignup("signupForm")}}},[e._v("注册")])],1)],1)],1)},K=[],Q={name:"Signup",data:function(){var e=this,t=function(e,t,i){if(""!==t){if(t.length<6)return i(new Error("请输入至少6位的密码")),!1;if(!/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@!*#$%&_=])[A-Za-z\d@!*#$%&_=]{8,18}$/.test(t))return i(new Error("密码必须包含字母、数字和特殊字符")),!1;i()}},i=function(t,i,o){if(""!==i){if(i.length<6)return o(new Error("请输入至少6位确认密码")),!1;if(i!==e.signupForm.password)return o(new Error("两次输入的新密码不一致")),!1;o()}};return{fullWidth:document.documentElement.clientWidth,fullHeight:document.documentElement.clientHeight,signupForm:{username:"",password:"",re_pwd:"",email:""},signupRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:5,message:"长度在2到5个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:t,trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:i,trigger:"blur"}],email:[{required:!0,message:"请输入您的邮箱",trigger:"blur"},{required:!0,message:"请输入正确的邮箱",pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/,trigger:"blur"}]}}},created:function(){window.addEventListener("resize",this.handleResize)},beforeUnmount:function(){window.removeEventListener("resize",this.handleResize)},methods:{toLogin:function(){this.$router.push("/"),this.signupForm={username:"",password:"",re_pwd:"",email:""}},submitSignup:function(e){var t=this;this.$refs[e].validate((function(e){e&&x.post("http://192.168.8.108:8080user/register",t.signupForm).then((function(e){console.log(e.data),200===e.code?(t.$message({message:"注册成功！",type:"success"}),t.$router.push("/home")):t.$message({message:"注册失败！",type:"error"})}))}))}}},ee=Q,te=(i("21da"),Object(l["a"])(ee,Y,K,!1,null,null,null)),ie=te.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"homePage",attrs:{direction:"vertical"}},[i("Top",{ref:"topComponent"}),i("el-container",{attrs:{direction:"horizontal"}},[i("Sidebar"),i("Content",{ref:"contentComponent"})],1)],1)},ne=[],se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-aside",[i("div",{staticClass:"tree_container"},[i("el-tree",{ref:"tree",staticClass:"custom-class",attrs:{"default-active":"2",data:e.menuList,props:e.props,"default-expand-all":"","expand-on-click-node":!1,"highlight-current":""},on:{"node-click":e.handleSelect,"node-contextmenu":e.rightClick},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node;return i("span",{staticClass:"custom-tree-node"},[i("span",[i("el-icon",{attrs:{name:"folder-opened"}}),e._v(e._s(o.label)+" ")],1)])}}])})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}],attrs:{id:"menu"},on:{mouseleave:function(t){e.menuVisible=!e.menuVisible}}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"text item"},[i("el-link",{attrs:{icon:"el-icon-circle-plus-outline",underline:!1},on:{click:function(t){e.createFolderVisible=!0}}},[e._v("新建")])],1),i("div",{staticClass:"text item"},[i("el-link",{attrs:{icon:"el-icon-edit-outline",underline:!1},on:{click:function(t){e.renameFolderVisible=!0}}},[e._v("重命名")])],1),i("div",{staticClass:"text item"},[i("el-link",{attrs:{icon:"el-icon-delete",underline:!1},on:{click:function(t){e.deleteFolderVisible=!0}}},[e._v("删除")])],1)])],1),i("el-dialog",{attrs:{title:"删除文件夹",visible:e.deleteFolderVisible,width:"30%",height:"50%"},on:{"update:visible":function(t){e.deleteFolderVisible=t}}},[i("span",[e._v("确认删除该文件夹及其包含的所有文件？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deleteFolderVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteFolderVisible=!1,e.deleteFolder()}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"新建文件夹",visible:e.createFolderVisible,width:"30%",height:"50%"},on:{"update:visible":function(t){e.createFolderVisible=t}}},[i("el-input",{attrs:{placeholder:"请输入名称"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.createFolderVisible=!1,e.createFolder()}},model:{value:e.nameInput,callback:function(t){e.nameInput=t},expression:"nameInput"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.createFolderVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createFolderVisible=!1,e.createFolder()}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"重命名文件夹",visible:e.renameFolderVisible,width:"30%",height:"50%"},on:{"update:visible":function(t){e.renameFolderVisible=t}}},[i("el-input",{attrs:{placeholder:"请输入名称"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.renameFolderVisible=!1,e.renameFolder()}},model:{value:e.renameInput,callback:function(t){e.renameInput=t},expression:"renameInput"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.renameFolderVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.renameFolderVisible=!1,e.renameFolder()}}},[e._v("确 定")])],1)],1)],1)},re=[],ae=i("b85c"),le=function e(t,i){if(i(t),t.children instanceof Array){var o,n=Object(ae["a"])(t.children);try{for(n.s();!(o=n.n()).done;){var s=o.value;e(s,i)}}catch(r){n.e(r)}finally{n.f()}}return t},ce={name:"Sidebar",data:function(){return{menuList:[],folderName:"",nameInput:"",renameInput:"",menuVisible:!1,deleteFolderVisible:!1,createFolderVisible:!1,renameFolderVisible:!1,props:{label:"foldername",id:"id"}}},computed:Object(m["a"])({},Object(f["b"])({refreshCount:"refreshCount",currentId:"currentId",options:"options",currentPage:"currentPage",pageSize:"pageSize",dataCount:"dataCount",showInfo:"showInfo",isSearch:"isSearch",isRetrieve:"isRetrieve"})),watch:{refreshCount:function(){this.handleSelect({id:this.currentId})},currentPage:function(){this.isSearch||this.isRetrieve||this.handleSelect({id:this.currentId})},pageSize:function(){this.isSearch||this.isRetrieve||this.handleSelect({id:this.currentId})},currentId:function(){this.$store.commit("setCurrentPage",1)}},methods:{rightClick:function(e,t,i,o){this.$store.commit("setCurrentId",t.id),console.log(this.currentId),this.renameInput=t.foldername,this.menuVisible=!0;var n=document.querySelector("#menu");n.style.cssText="position: fixed; left: "+(e.clientX-10)+"px; top: "+(e.clientY-25)+"px; z-index: 999; cursor:pointer;"},deleteFolder:function(){var e=this;x.post("http://192.168.8.108:8080/folder/delete",{id:this.currentId}).then((function(t){console.log(t.data),e.$message({type:200===t.code?"success":"error",message:t.msg}),e.searchFolder()}))},createFolder:function(){var e=this;x.post("http://192.168.8.108:8080/folder/create",{id:this.currentId,name:this.nameInput}).then((function(t){e.$message({type:200===t.code?"success":"error",message:t.msg}),200===t.code&&(e.nameInput="",e.searchFolder())}))},renameFolder:function(){var e=this;x.post("http://192.168.8.108:8080/folder/rename",{id:this.currentId,name:this.renameInput}).then((function(t){e.$message({type:200===t.code?"success":"error",message:t.msg}),200===t.code&&(e.renameInput="",e.searchFolder())}))},handleSelect:function(e){var t=this;this.$store.commit("setIsSearch",!1),this.$store.commit("setCurrentId",e.id),x.post("http://192.168.8.108:8080/docs/folder",{id:e.id,currentPage:this.currentPage,pageSize:this.pageSize}).then((function(e){t.$store.commit("setShowInfo",e.data.records),t.$store.commit("setDataCount",e.data.total)}))},searchFolder:function(){var e=this;this.$store.commit("setCurrentPage",1),this.$store.commit("setPageSize",10),x.get("http://192.168.8.108:8080/folder/search").then((function(t){200===t.code?(e.menuList=t.data.map((function(e){return le(e,(function(e){e.id=String(e.id)}))})),e.$store.commit("setOptions",e.menuList)):e.$message({message:"接口错误!",type:"error"}),e.handleSelect(e.menuList[0])}))}},mounted:function(){this.searchFolder()}},ue=ce,de=(i("83e0"),Object(l["a"])(ue,se,re,!1,null,"a3b69fe8",null)),pe=de.exports,he=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"header"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:17}},[o("div",{staticClass:"search"},[o("div",[o("el-input",{staticClass:"searchInput",attrs:{placeholder:"请输入关键词"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchInfo()}},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),o("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:function(t){return e.searchInfo()}}})],1),o("div",[o("img",{ref:"switchDirection",staticClass:"switch",attrs:{src:i("12eb")},on:{click:function(t){return t.stopPropagation(),e.SwitchSearch(t)}}})])]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowRetrieve,expression:"isShowRetrieve"}],staticClass:"retrieve"},[o("el-form",{ref:"retrieveForm",staticClass:"retrieveForm",attrs:{model:e.retrieveForm,"label-width":"80px",rules:e.rules}},[o("el-form-item",{attrs:{label:"上传时间"}},[o("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:e.retrieveForm.time,callback:function(t){e.$set(e.retrieveForm,"time",t)},expression:"retrieveForm.time"}})],1),o("el-form-item",{attrs:{label:"上传人员"}},[o("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.retrieveForm.uploader,callback:function(t){e.$set(e.retrieveForm,"uploader",t)},expression:"retrieveForm.uploader"}},e._l(e.uploaderOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1),o("el-form-item",{attrs:{label:"发送人员"}},[o("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.retrieveForm.sender,callback:function(t){e.$set(e.retrieveForm,"sender",t)},expression:"retrieveForm.sender"}},e._l(e.senderOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1),o("el-form-item",{staticClass:"select",attrs:{clearable:"",label:"文件类型"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.retrieveForm.type,callback:function(t){e.$set(e.retrieveForm,"type",t)},expression:"retrieveForm.type"}},[o("el-option",{attrs:{label:".txt",value:".txt"}}),o("el-option",{attrs:{label:".docx",value:".docx"}}),o("el-option",{attrs:{label:".pdf",value:".pdf"}}),o("el-option",{attrs:{label:".pptx",value:".pptx"}}),o("el-option",{attrs:{label:".xlsx",value:".xlsx"}}),o("el-option",{attrs:{label:".jpeg",value:".jpeg"}}),o("el-option",{attrs:{label:".jpg",value:".jpg"}}),o("el-option",{attrs:{label:".png",value:".png"}}),o("el-option",{attrs:{label:".gif",value:".gif"}}),o("el-option",{attrs:{label:".mp4",value:".mp4"}}),o("el-option",{attrs:{label:".flv",value:".flv"}}),o("el-option",{attrs:{label:".mp3",value:".mp3"}})],1)],1)],1),o("div",{staticClass:"retrieveBtn"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toRetrieve("retrieveForm")}}},[e._v("检索")]),o("el-button",{on:{click:function(t){return e.SwitchSearch()}}},[e._v("取消")])],1)],1)]),o("el-col",{attrs:{span:7}},[o("div",{staticClass:"person_center"},[o("div",{staticStyle:{"margin-right":"30px"},on:{click:function(t){e.uploadVisible=!0}}},[o("img",{attrs:{title:"上传",src:i("c93a")}})]),o("div",{staticStyle:{"margin-right":"30px"}},[o("el-badge",{staticClass:"item",attrs:{value:e.filter(e.messageList),hidden:e.hiddenMessageNum}},[o("el-popover",{attrs:{placement:"top-start",width:"450",trigger:"click",disabled:e.hiddenMessageNum}},[o("div",{staticClass:"messageGroups"},e._l(e.messageList,(function(t,i){return o("div",{key:i,staticClass:"message",class:["true"===t.readFlag?"message_read":"message_unread"],on:{click:function(i){return e.readMessage(t)}}},[o("div",{staticClass:"date"},[e._v(e._s(t.date))]),o("div",{staticClass:"content"},[e._v(e._s(t.content))]),o("div",{staticClass:"title",attrs:{title:t.title}},[o("strong",[e._v("标题:")]),e._v(" "+e._s(t.title)+" ")])])})),0),o("div",{directives:[{name:"show",rawName:"v-show",value:e.messageList.length>0,expression:"messageList.length > 0"}],staticStyle:{"text-align":"right","margin-top":"10px"}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clearMessage()}}},[e._v("一键清空")])],1),o("img",{staticStyle:{width:"42px"},attrs:{slot:"reference",title:e.hiddenMessageNum?"暂无数据":"消息中心",src:i("8c39")},slot:"reference"})])],1)],1),o("div",[o("el-dropdown",[o("div",{staticStyle:{display:"flex"}},[o("img",{staticStyle:{height:"36px","margin-top":"10px"},attrs:{src:i("fe85")}}),o("div",{staticStyle:{cursor:"pointer","font-size":"20px"}},[e._v(" "+e._s(e.currentuser.username)+" ")])]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["admin"===this.currentuser.username?o("el-dropdown-item",{nativeOn:{click:function(t){return e.toPersonal()}}},[e._v("个人中心")]):e._e(),o("el-dropdown-item",{nativeOn:{click:function(t){e.logoutVisible=!0}}},[e._v("退出登录")])],1)],1)],1)])])],1),o("el-dialog",{staticClass:"upload",attrs:{title:"上传",visible:e.uploadVisible,width:"35%",center:""},on:{"update:visible":function(t){e.uploadVisible=t}}},[o("div",[o("el-button",{attrs:{type:"primary"},on:{click:e.upload}},[e._v("点击上传")]),e._l(e.selectedFile,(function(t,i){return o("div",{key:i},[o("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+" "),o("el-button",{staticClass:"btnDel",attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.delSelected(i)}}})],1)}))],2),o("div",{staticClass:"upload-footer",attrs:{slot:"footer"},slot:"footer"},[o("div",[o("span",[e._v("位置选择")]),o("el-cascader",{staticClass:"selectedFolder",attrs:{options:e.options,props:e.folderProps},model:{value:e.selectedFolder,callback:function(t){e.selectedFolder=t},expression:"selectedFolder"}})],1),o("el-button",{on:{click:function(t){e.uploadVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.uploadVisible=!1,e.toUpload()}}},[e._v("确 定")])],1)]),o("el-dialog",{staticClass:"logout",attrs:{title:"提示",visible:e.logoutVisible,width:"30%",height:"50%"},on:{"update:visible":function(t){e.logoutVisible=t}}},[o("span",[e._v("确认退出登录？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.logoutVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.logoutVisible=!1,e.toLogout()}}},[e._v("确 定")])],1)])],1)},me=[],fe=i("ade3"),ge=(i("5319"),i("4de4"),i("a434"),{name:"Top",data:function(){var e=this,t=function(t,i,o){i<e.retrieveForm.start?o(new Error("结束日期不能小于开始日期")):o()};return{username:"",searchInput:"",isShowRetrieve:!1,retrieveForm:{uploader:"",time:[],sender:"",type:""},uploaderOptions:[],senderOptions:[],rules:{end:[{validator:t,trigger:"blur"}]},logoutVisible:!1,uploadVisible:!1,selectedFile:[],selectedFolder:[],messageList:[],hiddenMessageNum:!0,folderProps:{label:"foldername",value:"id",checkStrictly:!0},wsUrl:"http://192.168.8.108:8081".replace("https","wss").replace("http","ws"),ws:null,lockReconnect:!1,timeout:5e3,timeoutObj:null,serverTimeoutObj:null,timeoutnum:null}},computed:Object(m["a"])({},Object(f["b"])({currentuser:"currentuser",infoSelection:"infoSelection",options:"options",currentId:"currentId",currentPage:"currentPage",pageSize:"pageSize",showInfo:"showInfo",dataCount:"dataCount",isSearch:"isSearch",isRetrieve:"isRetrieve"})),created:function(){this.initWebSocket(),this.getMessageList()},watch:{currentPage:function(){this.isSearch?this.searchInfo():this.isRetrieve&&this.toRetrieve()},pageSize:function(){this.isSearch?this.searchInfo():this.isRetrieve&&this.toRetrieve()}},methods:(q={getMessageList:function(){var e=this;x.get("http://192.168.8.108:8080/message/show/"+this.currentuser.id).then((function(t){200===t.code&&(t.data.length>0?e.messageList=t.data.map((function(e){return{date:e.date,content:e.content,title:e.title,readFlag:"false"}})):e.messageList=[])}))},clearMessage:function(){var e=this;x.get("http://192.168.8.108:8080/message/delete/"+this.currentuser.id).then((function(t){e.getMessageList()}))},initWebSocket:function(){if("undefined"===typeof WebSocket)return console.log("您的浏览器不支持websocket");this.ws=new WebSocket(this.wsUrl+"/web/ws/projectId/"+this.currentuser.username),this.ws.onmessage=this.websocketonmessage,this.ws.onopen=this.websocketonopen,this.ws.onerror=this.websocketonerror,this.ws.onclose=this.websocketclose},reconnect:function(){var e=this;e.lockReconnect||(e.lockReconnect=!0,e.timeoutnum&&clearTimeout(e.timeoutnum),e.timeoutnum=setTimeout((function(){e.initWebSocket(),e.lockReconnect=!1}),5e3))},reset:function(){var e=this;clearTimeout(e.timeoutObj),clearTimeout(e.serverTimeoutObj),e.start()},start:function(){console.log("开启心跳");var e=this;e.timeoutObj&&clearTimeout(e.timeoutObj),e.serverTimeoutObj&&clearTimeout(e.serverTimeoutObj),e.timeoutObj=setTimeout((function(){1===e.ws.readyState?e.ws.send("ping"):e.reconnect(),e.serverTimeoutObj=setTimeout((function(){e.ws.close()}),e.timeout)}),e.timeout)},websocketonopen:function(){console.log("websocket连接成功"),this.start()},websocketonerror:function(){console.log("WebSocket连接发生错误"),this.reconnect()},websocketonmessage:function(e){if("pong"===e.data);else{console.log(e.data);var t=JSON.parse(e.data);this.messageList.unshift(t)}this.reset()},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){console.log("断开连接",e)},filter:function(e){var t=this.messageList.filter((function(e){return"false"===e.readFlag})),i=t.length;return this.hiddenMessageNum=0===i,t.length}},Object(fe["a"])(q,"clearMessage",(function(){this.messageList=[]})),Object(fe["a"])(q,"SwitchSearch",(function(){var e=this;this.isShowRetrieve?(this.$refs.switchDirection.src=i("12eb"),this.$refs.switchDirection.style.top="34px",this.isShowRetrieve=!1):(this.$refs.switchDirection.src=i("db5d"),this.$refs.switchDirection.style.top="426px",this.isShowRetrieve=!0,x.get("http://192.168.8.108:8080/user/search").then((function(t){console.log(t.data),200===t.code&&(e.uploaderOptions=t.data.map((function(e){return{value:e.id,label:e.username}})),e.senderOptions=e.uploaderOptions)})))})),Object(fe["a"])(q,"upload",(function(){var e=this,t=document.createElement("input");t.type="file",t.multiple=!0,t.onchange=function(t){var i,o=Object(ae["a"])(t.target.files);try{for(o.s();!(i=o.n()).done;){var n=i.value;e.selectedFile.push(n)}}catch(s){o.e(s)}finally{o.f()}},t.click()})),Object(fe["a"])(q,"toUpload",(function(){var e=this,t=new FormData;if(this.selectedFile)if(this.selectedFolder){t.append("folder",this.selectedFolder);var i,o=Object(ae["a"])(this.selectedFile);try{for(o.s();!(i=o.n()).done;){var n=i.value;t.append("file",n)}}catch(r){o.e(r)}finally{o.f()}var s=this.selectedFolder[this.selectedFolder.length-1];this.$store.commit("setCurrentId",s),x.postformdata("http://192.168.8.108:8080/upload",t).then((function(t){e.$message({type:200===t.code?"success":"error",message:t.msg}),200===t.code&&e.$store.commit("refresh")}))}else this.$message({message:"请选择文件存放位置",type:"error"});else this.$message({message:"请选择文件",type:"error"})})),Object(fe["a"])(q,"delSelected",(function(e){this.selectedFile.splice(e,1)})),Object(fe["a"])(q,"headStyle",(function(){return"text-align:center"})),Object(fe["a"])(q,"rowStyle",(function(){return"text-align:center"})),Object(fe["a"])(q,"handleClose",(function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))})),Object(fe["a"])(q,"searchInfo",(function(){var e=this;this.searchInput.trim()||this.$message({message:"请输入内容",duration:"1000"});var t={texts:this.searchInput,currentPage:this.currentPage,pageSize:this.pageSize};x.post("http://192.168.8.108:8080/docs/keySearch",t).then((function(t){console.log(t.data),200===t.code&&(e.$store.commit("setShowInfo",t.data.records),e.$store.commit("setDataCount",t.data.total),e.$store.commit("setCurrentPage",t.data.current),e.$store.commit("setPageSize",t.data.size))}))})),Object(fe["a"])(q,"toRetrieve",(function(){var e=this;this.$store.commit("setIsSearch",!0);var t={currentPage:this.currentPage,pageSize:this.pageSize,uploader:this.retrieveForm.uploader,time:this.retrieveForm.time,sender:this.retrieveForm.sender,status:this.retrieveForm.status,type:this.retrieveForm.type};x.post("http://192.168.8.108:8080/docs/search",t).then((function(t){console.log(t.data),200===t.code&&(e.$refs.switchDirection.src=i("12eb"),e.$refs.switchDirection.style.top="34px",e.isShowRetrieve=!1,e.$store.commit("setShowInfo",t.data.records),e.$store.commit("setDataCount",t.data.total),e.$store.commit("setCurrentPage",t.data.current),e.$store.commit("setPageSize",t.data.size))}))})),Object(fe["a"])(q,"toPersonal",(function(){this.$router.push("/personal")})),Object(fe["a"])(q,"toLogout",(function(){this.$store.commit("setAuthorization",""),this.$store.commit("setCurrentuser",{}),J.setCookie("Authorization","",0),J.setCookie("userinfo","",0),this.$router.push("/")})),Object(fe["a"])(q,"readMessage",(function(e){e.readFlag=!0})),q)}),ve=ge,be=(i("de4c"),Object(l["a"])(ve,he,me,!1,null,"79278e73",null)),we=be.exports,ye={name:"Home",components:{Sidebar:pe,Top:we,Content:T},data:function(){return{}},methods:{},mounted:function(){},beforeDestroy:function(){}},ke=ye,Se=(i("21bb"),Object(l["a"])(ke,oe,ne,!1,null,null,null)),xe=Se.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"title",rawName:"v-title"}],staticStyle:{height:"100vh"},attrs:{"data-title":"编辑文件",id:"editorDiv",option:e.option,"document-url":e.documentUrl}})},_e=[];i("caad");function Oe(e){var t="",i=["doc","docm","docx","dot","dotm","dotx","epub","fodt","htm","html","mht","odt","ott","pdf","rtf","txt","djvu","xps"],o=["csv","fods","ods","ots","xls","xlsm","xlsx","xlt","xltm","xltx"],n=["fodp","odp","otp","pot","potm","potx","pps","ppsm","ppsx","ppt","pptm","pptx"];return i.includes(e)&&(t="word"),o.includes(e)&&(t="cell"),n.includes(e)&&(t="slide"),t}i("39e7"),i("1503");var Fe={name:"OnlyOffice",data:function(){return{doctype:"",documentUrl:"",option:{url:"",title:"",fileType:"",isEdit:!0,key:"",isPrint:"",user:{id:"",name:""},token:"",height:"100%",width:"100%",permissions:{copy:!0,download:!0,edit:"",print:!0},editorConfig:{lang:"zh",mode:"edit",customization:{plugins:!1}}}}},computed:Object(m["a"])({},Object(f["b"])({currentuser:"currentuser"})),created:function(){var e=document.createElement("script");e.type="text/javascript",e.src="http://192.168.8.108/web-apps/apps/api/documents/api.js",document.getElementsByTagName("head")[0].appendChild(e),console.log(document.getElementsByTagName("head")[0])},mounted:function(){var e=this;x.post("http://192.168.8.108:8080/docs/edit",{id:this.$route.query.id}).then((function(t){if(e.$message({type:200===t.code?"success":"error",message:t.msg}),200===t.code){console.log("返回的数据"+t.data);var i="http://192.168.8.108:8080/"+t.data[0];e.option.url=i,e.option.title=t.data[1],e.option.fileType=t.data[2],e.option.key=t.data[3],e.option.permissions.isEdit=!0,e.option.user.name=e.currentuser.username}})),this.option.url&&this.setEditor(this.option)},methods:{setEditor:function(e){this.doctype=Oe(e.fileType),console.log("url:"+e.url);var t=this.$route.query.id+","+this.currentuser.username,i={document:{fileType:e.fileType,key:e.key,title:e.title,permissions:{comment:!0,download:!0,modifyContentControl:!0,modifyFilter:!0,print:!0,edit:e.isEdit,fillForms:!0,review:!0},url:e.url},documentType:this.doctype,editorConfig:{callbackUrl:"http://192.168.8.108:8080/docs/saveFile/"+t,lang:e.editorConfig.lang,customization:{commentAuthorOnly:!1,comments:!0,compactHeader:!1,compactToolbar:!0,feedback:!1,plugins:e.editorConfig.customization.plugins,autosave:!1,forcesave:!1,features:{spellcheck:{mode:!1}},services:{CoAuthoring:{server:{savetimeoutdelay:50}}}},user:e.user,mode:e.model?e.model:"edit"},width:"100%",height:"100%",token:e.token};console.log("setEditor ==> option:",e,"config:",i),this.$nextTick((function(){setTimeout((function(){var e=new window.DocsAPI.DocEditor("editorDiv",i);console.log("docEditor:"+e)}),1500)}))}},watch:{option:{handler:function(e,t){this.setEditor(e),this.doctype=Oe(e.fileType)},deep:!0}}},$e=Fe,Ie=(i("6460"),Object(l["a"])($e,Ce,_e,!1,null,"1ab91ba8",null)),je=Ie.exports,ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"header"},[i("div",{staticClass:"container"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"title",attrs:{span:"6"}},[e._v(" 用户管理 ")]),i("el-col",{staticClass:"nav",attrs:{span:"14"}},[i("el-input",{staticClass:"search",attrs:{placeholder:"请输入内容"},model:{value:e.searchUser,callback:function(t){e.searchUser=t},expression:"searchUser"}}),i("el-button",{attrs:{icon:"el-icon-search",circle:""}})],1)],1)],1)]),i("div",{staticClass:"page"},[i("div",{staticClass:"scrollbar"}),i("div",{staticClass:"content"},[i("el-table",{ref:"userTable",staticClass:"userTable",staticStyle:{"overflow-y":"auto"},style:{"max-height":this.timeLineHeight+"px"},attrs:{data:e.userData,"cell-style":e.rowStyle}},[i("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),i("el-table-column",{attrs:{type:"index",label:"序号",width:"60px"}}),i("el-table-column",{attrs:{prop:"username",label:"用户名","min-width":"15%","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"registertime",label:"注册时间","min-width":"15%"}}),i("el-table-column",{attrs:{prop:"role",label:"用户角色","min-width":"8%"}}),i("el-table-column",{attrs:{label:"权限管理","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.limit,callback:function(i){e.$set(t.row,"limit",i)},expression:"scope.row.limit"}},e._l(t.row.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])})],1)],1)])])},Ve=[],Te={data:function(){return{options:[{label:"审核",value:"examine"},{label:"查看",value:"check"},{label:"编辑",value:"edit"}],userData:[],value:""}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;x.get("http://192.168.8.108:8080/user/search").then((function(t){200===t.code&&(e.userData=t.data.map((function(t){return{id:t.id,username:t.username,role:t.role,options:e.options,limit:""}})),console.log(e.userData))}))}}},Ee=Te,Re=(i("030e"),Object(l["a"])(Ee,ze,Ve,!1,null,"28b91eba",null)),Pe=Re.exports;o["default"].use(d["a"]);var Le=[{path:"/",name:"Login",component:X},{path:"/home",component:xe,redirect:"/home/content",children:[{path:"content",name:"Content",component:T},{path:"preview",name:"Preview",component:M}]},{path:"/signup",component:ie},{path:"/onlyoffice",name:"OnlyOffice",component:je},{path:"/personal",name:"Personal",component:Pe}],De=new d["a"]({routes:Le}),Ae=De,Me=i("5c96"),Ne=i.n(Me),Ue=(i("0fae"),i("bc3a")),He=i.n(Ue);o["default"].config.productionTip=!1,o["default"].use(Ne.a),o["default"].directive("title",{inserted:function(e,t){document.title=e.dataset.title}}),o["default"].prototype.$axios=He.a,He.a.defaults.baseURL="/";var We=i("e762").Base64;Ae.beforeEach((function(e,t,i){if("Login"===e.name)i();else{var o=J.getCookie("Authorization"),n=J.getCookie("userinfo");o?(g.state.Authorization||g.commit("setAuthorization",o),g.state.currentuser.username||g.commit("setCurrentuser",JSON.parse(n)),i()):Ae.push({name:"Login"})}})),new o["default"]({router:Ae,store:g,el:"#app",Base64:We,render:function(e){return e(u)},beforeCreate:function(){o["default"].prototype.$bus=this}}).$mount("#app")},"58ff":function(e,t,i){"use strict";i("3482")},"5c0b":function(e,t,i){"use strict";i("9c0c")},6460:function(e,t,i){"use strict";i("f206")},6581:function(e,t,i){},"7cc2":function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="7cc2"},"83e0":function(e,t,i){"use strict";i("f6b2")},"8c39":function(e,t,i){e.exports=i.p+"img/message.01d4ab34.svg"},"9c0c":function(e,t,i){},be69:function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="be69"},c93a:function(e,t,i){e.exports=i.p+"img/upload.b55b11b6.svg"},d394:function(e,t,i){},db5d:function(e,t,i){e.exports=i.p+"img/top.0712a5e1.svg"},de4c:function(e,t,i){"use strict";i("12ea")},e596:function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="e596"},effc:function(e,t,i){},f206:function(e,t,i){},f6b2:function(e,t,i){},fe85:function(e,t,i){e.exports=i.p+"img/person.fa03d6ad.svg"},ffbf:function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="ffbf"}});
//# sourceMappingURL=app.270b5f3f.js.map